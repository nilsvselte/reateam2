<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Model Evaluation on Homework Assignments</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-primary: #0d1117;
        --bg-secondary: #161b22;
        --bg-tertiary: #21262d;
        --border-color: #30363d;
        --text-primary: #e6edf3;
        --text-secondary: #8b949e;
        --text-muted: #6e7681;
        --accent-blue: #58a6ff;
        --accent-green: #3fb950;
        --accent-yellow: #d29922;
        --accent-red: #f85149;
        --accent-purple: #a371f7;
        --accent-cyan: #39c5cf;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Outfit", sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        line-height: 1.6;
        min-height: 100vh;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem;
      }

      header {
        text-align: center;
        margin-bottom: 3rem;
        padding: 3rem 2rem;
        background: linear-gradient(
          135deg,
          var(--bg-secondary) 0%,
          var(--bg-tertiary) 100%
        );
        border-radius: 16px;
        border: 1px solid var(--border-color);
      }

      header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        background: linear-gradient(
          135deg,
          var(--accent-blue),
          var(--accent-purple)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
      }

      .stats-bar {
        display: flex;
        justify-content: center;
        gap: 3rem;
        margin-top: 1.5rem;
        flex-wrap: wrap;
      }

      .stat {
        text-align: center;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 600;
        color: var(--accent-cyan);
        font-family: "JetBrains Mono", monospace;
      }

      .stat-label {
        font-size: 0.85rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .filters {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        align-items: center;
      }

      .filter-group {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .filter-group label {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      select {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        color: var(--text-primary);
        padding: 0.5rem 1rem;
        border-radius: 8px;
        font-family: inherit;
        font-size: 0.9rem;
        cursor: pointer;
        transition: border-color 0.2s;
      }

      select:hover {
        border-color: var(--accent-blue);
      }

      .view-toggle {
        display: flex;
        background: var(--bg-secondary);
        border-radius: 8px;
        border: 1px solid var(--border-color);
        overflow: hidden;
        margin-left: auto;
      }

      .view-toggle button {
        background: transparent;
        border: none;
        color: var(--text-secondary);
        padding: 0.5rem 1rem;
        cursor: pointer;
        font-family: inherit;
        font-size: 0.9rem;
        transition: all 0.2s;
      }

      .view-toggle button.active {
        background: var(--accent-blue);
        color: var(--bg-primary);
      }

      .hw-section {
        margin-bottom: 2rem;
      }

      .hw-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
        padding: 1rem 1.5rem;
        background: var(--bg-secondary);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        cursor: pointer;
        transition: all 0.2s;
      }

      .hw-header:hover {
        border-color: var(--accent-blue);
      }

      .hw-header.collapsed .hw-content-wrapper {
        display: none;
      }

      .hw-badge {
        background: linear-gradient(
          135deg,
          var(--accent-blue),
          var(--accent-purple)
        );
        color: white;
        padding: 0.4rem 1rem;
        border-radius: 6px;
        font-weight: 600;
        font-size: 0.9rem;
        white-space: nowrap;
      }

      .hw-title {
        flex: 1;
        font-size: 1.2rem;
        font-weight: 500;
      }

      .hw-stats {
        display: flex;
        gap: 1.5rem;
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .hw-expand-icon {
        color: var(--text-muted);
        transition: transform 0.2s;
      }

      .hw-header.collapsed .hw-expand-icon {
        transform: rotate(-90deg);
      }

      .hw-summary {
        background: var(--bg-tertiary);
        border-radius: 10px;
        padding: 1.25rem;
        margin-bottom: 1rem;
        border-left: 3px solid var(--accent-green);
      }

      .hw-summary h4 {
        color: var(--accent-green);
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 0.5rem;
      }

      .hw-summary p {
        color: var(--text-secondary);
        font-size: 0.95rem;
      }

      .model-groups {
        display: grid;
        gap: 1rem;
      }

      .model-group {
        background: var(--bg-secondary);
        border-radius: 12px;
        border: 1px solid var(--border-color);
        overflow: hidden;
      }

      .model-group-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem 1.25rem;
        background: var(--bg-tertiary);
        cursor: pointer;
        transition: background 0.2s;
      }

      .model-group-header:hover {
        background: #282e36;
      }

      .model-icon {
        width: 36px;
        height: 36px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.85rem;
        color: white;
      }

      .model-icon.chatgpt {
        background: linear-gradient(135deg, #10a37f, #1a7f64);
      }
      .model-icon.claude {
        background: linear-gradient(135deg, #cc785c, #a85d45);
      }
      .model-icon.gemini {
        background: linear-gradient(135deg, #4285f4, #669df6);
      }
      .model-icon.deepseek {
        background: linear-gradient(135deg, #6366f1, #818cf8);
      }
      .model-icon.mistral {
        background: linear-gradient(135deg, #ff7000, #ff9500);
      }
      .model-icon.grok {
        background: linear-gradient(135deg, #1da1f2, #14171a);
      }
      .model-icon.qwen {
        background: linear-gradient(135deg, #7c3aed, #a855f7);
      }
      .model-icon.kimi {
        background: linear-gradient(135deg, #06b6d4, #22d3ee);
      }
      .model-icon.other {
        background: linear-gradient(135deg, #6b7280, #9ca3af);
      }

      .model-name {
        flex: 1;
        font-weight: 500;
      }

      .model-count {
        background: var(--bg-primary);
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.8rem;
        color: var(--text-secondary);
        font-family: "JetBrains Mono", monospace;
      }

      .model-expand-icon {
        color: var(--text-muted);
        transition: transform 0.2s;
      }

      .model-group.collapsed .model-expand-icon {
        transform: rotate(-90deg);
      }

      .model-group.collapsed .posts-list {
        display: none;
      }

      .posts-list {
        padding: 0.5rem;
      }

      .post-card {
        padding: 1rem 1.25rem;
        border-radius: 8px;
        margin-bottom: 0.5rem;
        transition: background 0.2s;
      }

      .post-card:hover {
        background: var(--bg-tertiary);
      }

      .post-card:last-child {
        margin-bottom: 0;
      }

      .post-header {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        margin-bottom: 0.75rem;
      }

      .post-title {
        flex: 1;
        font-weight: 500;
        color: var(--text-primary);
      }

      .post-title a {
        color: inherit;
        text-decoration: none;
        transition: color 0.2s;
      }

      .post-title a:hover {
        color: var(--accent-blue);
      }

      .post-meta {
        display: flex;
        gap: 1rem;
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .post-author {
        color: var(--text-secondary);
      }

      .post-version {
        font-family: "JetBrains Mono", monospace;
        background: var(--bg-primary);
        padding: 0.15rem 0.5rem;
        border-radius: 4px;
        font-size: 0.8rem;
      }

      .post-content {
        color: var(--text-secondary);
        font-size: 0.9rem;
        line-height: 1.7;
        max-height: 150px;
        overflow: hidden;
        position: relative;
      }

      .post-content.expanded {
        max-height: none;
      }

      .post-content:not(.expanded)::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(transparent, var(--bg-secondary));
        pointer-events: none;
      }

      .post-card:hover .post-content:not(.expanded)::after {
        background: linear-gradient(transparent, var(--bg-tertiary));
      }

      .expand-btn {
        background: transparent;
        border: none;
        color: var(--accent-blue);
        cursor: pointer;
        font-family: inherit;
        font-size: 0.85rem;
        padding: 0.5rem 0;
        margin-top: 0.5rem;
      }

      .expand-btn:hover {
        text-decoration: underline;
      }

      .loading {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 400px;
        color: var(--text-secondary);
      }

      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 3px solid var(--border-color);
        border-top-color: var(--accent-blue);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 1rem;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        color: var(--text-secondary);
      }

      .empty-state h3 {
        margin-bottom: 0.5rem;
        color: var(--text-primary);
      }

      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }

        header h1 {
          font-size: 1.75rem;
        }

        .stats-bar {
          gap: 1.5rem;
        }

        .filters {
          flex-direction: column;
          align-items: stretch;
        }

        .view-toggle {
          margin-left: 0;
        }

        .hw-header {
          flex-wrap: wrap;
        }

        .hw-stats {
          width: 100%;
          justify-content: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>AI Model Evaluation Dashboard</h1>
        <p>
          Analyzing how AI models perform on deep learning homework assignments
        </p>
        <div class="stats-bar">
          <div class="stat">
            <div class="stat-value" id="total-posts">-</div>
            <div class="stat-label">Total Posts</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="total-models">-</div>
            <div class="stat-label">Models Tested</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="total-hw">-</div>
            <div class="stat-label">Homework Sets</div>
          </div>
        </div>
      </header>

      <div class="filters">
        <div class="filter-group">
          <label for="hw-filter">Homework:</label>
          <select id="hw-filter">
            <option value="all">All Assignments</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="model-filter">Model:</label>
          <select id="model-filter">
            <option value="all">All Models</option>
          </select>
        </div>
        <div class="view-toggle">
          <button class="active" data-view="hw">By Homework</button>
          <button data-view="model">By Model</button>
        </div>
      </div>

      <main id="content">
        <div class="loading">
          <div class="loading-spinner"></div>
          <span>Loading data...</span>
        </div>
      </main>
    </div>

    <script>
      // Parse CSV with proper handling of quoted fields
      function parseCSV(text) {
        const lines = text.split("\n");
        const headers = parseCSVLine(lines[0]);
        const data = [];

        for (let i = 1; i < lines.length; i++) {
          if (lines[i].trim() === "") continue;
          const values = parseCSVLine(lines[i]);
          const row = {};
          headers.forEach((h, idx) => {
            row[h] = values[idx] || "";
          });
          data.push(row);
        }
        return data;
      }

      function parseCSVLine(line) {
        const result = [];
        let current = "";
        let inQuotes = false;

        for (let i = 0; i < line.length; i++) {
          const char = line[i];

          if (char === '"') {
            if (inQuotes && line[i + 1] === '"') {
              current += '"';
              i++;
            } else {
              inQuotes = !inQuotes;
            }
          } else if (char === "," && !inQuotes) {
            result.push(current);
            current = "";
          } else {
            current += char;
          }
        }
        result.push(current);
        return result;
      }

      // Generate AI summary for each HW based on the posts
      function generateHWSummary(posts) {
        const totalPosts = posts.length;
        const models = [
          ...new Set(posts.map((p) => p.base_model).filter(Boolean)),
        ];

        // Analyze text for performance indicators
        const successTerms = [
          "one-shot",
          "correct",
          "success",
          "accurate",
          "impressive",
          "strong",
          "excellent",
          "perfect",
          "flawless",
        ];
        const struggleTerms = [
          "struggled",
          "failed",
          "incorrect",
          "wrong",
          "error",
          "mistake",
          "hallucination",
          "issue",
        ];

        let successCount = 0;
        let struggleCount = 0;

        posts.forEach((post) => {
          const text = (post.text || "").toLowerCase();
          if (successTerms.some((term) => text.includes(term))) successCount++;
          if (struggleTerms.some((term) => text.includes(term)))
            struggleCount++;
        });

        const ratio =
          totalPosts > 0 ? (successCount - struggleCount) / totalPosts : 0;

        let summary = "";
        if (ratio > 0.3) {
          summary = `Strong AI performance across ${models.length} model(s). Most models successfully completed the tasks, with many achieving one-shot solutions.`;
        } else if (ratio > 0) {
          summary = `Mixed AI performance across ${models.length} model(s). Models showed competency but encountered some challenges on complex problems.`;
        } else if (ratio > -0.3) {
          summary = `Variable AI performance across ${models.length} model(s). Results varied significantly between models and specific questions.`;
        } else {
          summary = `Challenging assignment for AI models. ${models.length} model(s) tested with notable struggles on various components.`;
        }

        return summary;
      }

      // Get model icon class
      function getModelIconClass(model) {
        const m = (model || "").toLowerCase();
        if (m.includes("chatgpt") || m.includes("gpt")) return "chatgpt";
        if (m.includes("claude")) return "claude";
        if (m.includes("gemini") || m.includes("gemma")) return "gemini";
        if (m.includes("deepseek")) return "deepseek";
        if (m.includes("mistral")) return "mistral";
        if (m.includes("grok")) return "grok";
        if (m.includes("qwen")) return "qwen";
        if (m.includes("kimi")) return "kimi";
        return "other";
      }

      // Get model initial
      function getModelInitial(model) {
        const iconClass = getModelIconClass(model);
        const initials = {
          chatgpt: "GPT",
          claude: "CL",
          gemini: "GE",
          deepseek: "DS",
          mistral: "MI",
          grok: "GR",
          qwen: "QW",
          kimi: "KI",
          other: "?",
        };
        return initials[iconClass];
      }

      // Render by homework view
      function renderByHomework(data, hwFilter, modelFilter) {
        const content = document.getElementById("content");

        // Filter data
        let filtered = data.filter(
          (d) => d.hw_number && d.hw_number.match(/^\d+$/)
        );
        if (hwFilter !== "all") {
          filtered = filtered.filter((d) => d.hw_number === hwFilter);
        }
        if (modelFilter !== "all") {
          filtered = filtered.filter((d) => d.base_model === modelFilter);
        }

        // Group by HW
        const hwGroups = {};
        filtered.forEach((post) => {
          const hw = post.hw_number;
          if (!hwGroups[hw]) hwGroups[hw] = [];
          hwGroups[hw].push(post);
        });

        if (Object.keys(hwGroups).length === 0) {
          content.innerHTML = `
          <div class="empty-state">
            <h3>No posts found</h3>
            <p>Try adjusting your filters</p>
          </div>
        `;
          return;
        }

        // Sort HW numbers
        const sortedHWs = Object.keys(hwGroups).sort(
          (a, b) => parseInt(a) - parseInt(b)
        );

        let html = "";
        sortedHWs.forEach((hw) => {
          const posts = hwGroups[hw];
          const summary = generateHWSummary(posts);

          // Group by model within HW
          const modelGroups = {};
          posts.forEach((post) => {
            const model = post.base_model || "Unknown";
            if (!modelGroups[model]) modelGroups[model] = [];
            modelGroups[model].push(post);
          });

          const modelCount = Object.keys(modelGroups).length;

          html += `
          <div class="hw-section">
            <div class="hw-header" onclick="toggleHW(this)">
              <span class="hw-badge">HW ${hw}</span>
              <span class="hw-title">Homework ${hw}</span>
              <div class="hw-stats">
                <span>${posts.length} post${
            posts.length !== 1 ? "s" : ""
          }</span>
                <span>${modelCount} model${modelCount !== 1 ? "s" : ""}</span>
              </div>
              <span class="hw-expand-icon">▼</span>
            </div>
            <div class="hw-content-wrapper">
              <div class="hw-summary">
                <h4>Summary</h4>
                <p>${summary}</p>
              </div>
              <div class="model-groups">
                ${Object.entries(modelGroups)
                  .sort((a, b) => b[1].length - a[1].length)
                  .map(
                    ([model, modelPosts]) => `
                    <div class="model-group">
                      <div class="model-group-header" onclick="toggleModelGroup(this.parentElement)">
                        <div class="model-icon ${getModelIconClass(
                          model
                        )}">${getModelInitial(model)}</div>
                        <span class="model-name">${model}</span>
                        <span class="model-count">${modelPosts.length}</span>
                        <span class="model-expand-icon">▼</span>
                      </div>
                      <div class="posts-list">
                        ${modelPosts.map((post) => renderPost(post)).join("")}
                      </div>
                    </div>
                  `
                  )
                  .join("")}
              </div>
            </div>
          </div>
        `;
        });

        content.innerHTML = html;
      }

      // Render by model view
      function renderByModel(data, hwFilter, modelFilter) {
        const content = document.getElementById("content");

        // Filter data
        let filtered = data.filter(
          (d) => d.hw_number && d.hw_number.match(/^\d+$/)
        );
        if (hwFilter !== "all") {
          filtered = filtered.filter((d) => d.hw_number === hwFilter);
        }
        if (modelFilter !== "all") {
          filtered = filtered.filter((d) => d.base_model === modelFilter);
        }

        // Group by model
        const modelGroups = {};
        filtered.forEach((post) => {
          const model = post.base_model || "Unknown";
          if (!modelGroups[model]) modelGroups[model] = [];
          modelGroups[model].push(post);
        });

        if (Object.keys(modelGroups).length === 0) {
          content.innerHTML = `
          <div class="empty-state">
            <h3>No posts found</h3>
            <p>Try adjusting your filters</p>
          </div>
        `;
          return;
        }

        // Sort by post count
        const sortedModels = Object.entries(modelGroups).sort(
          (a, b) => b[1].length - a[1].length
        );

        let html = "";
        sortedModels.forEach(([model, posts]) => {
          const summary = generateHWSummary(posts);

          // Group by HW within model
          const hwGroups = {};
          posts.forEach((post) => {
            const hw = post.hw_number;
            if (!hwGroups[hw]) hwGroups[hw] = [];
            hwGroups[hw].push(post);
          });

          const hwCount = Object.keys(hwGroups).length;

          html += `
          <div class="hw-section">
            <div class="hw-header" onclick="toggleHW(this)">
              <div class="model-icon ${getModelIconClass(
                model
              )}">${getModelInitial(model)}</div>
              <span class="hw-title">${model}</span>
              <div class="hw-stats">
                <span>${posts.length} post${
            posts.length !== 1 ? "s" : ""
          }</span>
                <span>${hwCount} assignment${hwCount !== 1 ? "s" : ""}</span>
              </div>
              <span class="hw-expand-icon">▼</span>
            </div>
            <div class="hw-content-wrapper">
              <div class="hw-summary">
                <h4>Summary</h4>
                <p>${summary}</p>
              </div>
              <div class="model-groups">
                ${Object.entries(hwGroups)
                  .sort((a, b) => parseInt(a[0]) - parseInt(b[0]))
                  .map(
                    ([hw, hwPosts]) => `
                    <div class="model-group">
                      <div class="model-group-header" onclick="toggleModelGroup(this.parentElement)">
                        <span class="hw-badge">HW ${hw}</span>
                        <span class="model-name">Homework ${hw}</span>
                        <span class="model-count">${hwPosts.length}</span>
                        <span class="model-expand-icon">▼</span>
                      </div>
                      <div class="posts-list">
                        ${hwPosts.map((post) => renderPost(post)).join("")}
                      </div>
                    </div>
                  `
                  )
                  .join("")}
              </div>
            </div>
          </div>
        `;
        });

        content.innerHTML = html;
      }

      // Render individual post
      function renderPost(post) {
        const hasContent = post.text && post.text.trim().length > 0;
        return `
        <div class="post-card">
          <div class="post-header">
            <div class="post-title">
              ${
                post.url
                  ? `<a href="${post.url}" target="_blank">${
                      post.title_clean || "Untitled"
                    }</a>`
                  : post.title_clean || "Untitled"
              }
            </div>
          </div>
          <div class="post-meta">
            <span class="post-author">${post.name || "Anonymous"}</span>
            ${
              post.version
                ? `<span class="post-version">${post.version}</span>`
                : ""
            }
          </div>
          ${
            hasContent
              ? `
            <div class="post-content" id="content-${post.thread_id}">
              ${escapeHtml(post.text)}
            </div>
            <button class="expand-btn" onclick="toggleContent('${
              post.thread_id
            }', this)">Show more</button>
          `
              : '<p style="color: var(--text-muted); font-style: italic; margin-top: 0.5rem;">No detailed content available</p>'
          }
        </div>
      `;
      }

      function escapeHtml(text) {
        const div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      }

      // Toggle functions
      function toggleHW(header) {
        header.classList.toggle("collapsed");
      }

      function toggleModelGroup(group) {
        group.classList.toggle("collapsed");
      }

      function toggleContent(id, btn) {
        const content = document.getElementById("content-" + id);
        content.classList.toggle("expanded");
        btn.textContent = content.classList.contains("expanded")
          ? "Show less"
          : "Show more";
      }

      // Main initialization
      let allData = [];
      let currentView = "hw";

      async function init() {
        try {
          const response = await fetch("special_participation_a.csv");
          const text = await response.text();
          allData = parseCSV(text);

          // Filter valid data
          const validData = allData.filter(
            (d) => d.hw_number && d.hw_number.match(/^\d+$/)
          );

          // Update stats
          document.getElementById("total-posts").textContent = validData.length;

          const uniqueModels = [
            ...new Set(validData.map((d) => d.base_model).filter(Boolean)),
          ];
          document.getElementById("total-models").textContent =
            uniqueModels.length;

          const uniqueHW = [...new Set(validData.map((d) => d.hw_number))];
          document.getElementById("total-hw").textContent = uniqueHW.length;

          // Populate filters
          const hwFilter = document.getElementById("hw-filter");
          uniqueHW
            .sort((a, b) => parseInt(a) - parseInt(b))
            .forEach((hw) => {
              const option = document.createElement("option");
              option.value = hw;
              option.textContent = `HW ${hw}`;
              hwFilter.appendChild(option);
            });

          const modelFilter = document.getElementById("model-filter");
          uniqueModels.sort().forEach((model) => {
            const option = document.createElement("option");
            option.value = model;
            option.textContent = model;
            modelFilter.appendChild(option);
          });

          // Event listeners
          hwFilter.addEventListener("change", render);
          modelFilter.addEventListener("change", render);

          document.querySelectorAll(".view-toggle button").forEach((btn) => {
            btn.addEventListener("click", () => {
              document
                .querySelectorAll(".view-toggle button")
                .forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              currentView = btn.dataset.view;
              render();
            });
          });

          render();
        } catch (error) {
          console.error("Error loading data:", error);
          document.getElementById("content").innerHTML = `
          <div class="empty-state">
            <h3>Error loading data</h3>
            <p>${error.message}</p>
          </div>
        `;
        }
      }

      function render() {
        const hwFilter = document.getElementById("hw-filter").value;
        const modelFilter = document.getElementById("model-filter").value;

        if (currentView === "hw") {
          renderByHomework(allData, hwFilter, modelFilter);
        } else {
          renderByModel(allData, hwFilter, modelFilter);
        }
      }

      init();
    </script>
  </body>
</html>
